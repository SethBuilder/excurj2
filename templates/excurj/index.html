{% extends 'excurj/base.html' %}
{% load staticfiles %}

{% block title_block %}
  Make New Friends As You Travel!
{% endblock %}

{% block body_block %}

<div class="jumbotron" id="index-jumbotron">
  <div id="container">
    <div class="homepage_jumbo">

        <section class="header-sections">
        
          <h1>{{request.user.first_name}},

       

          where do you want to go?</h1>
        
        </section>

        <section class="header-sections">
          <p>excurj. is a community where people show visitors around their cities to make new friendships.</p>
        </section>

        <form action=" {% url 'excurj:search' %} ">
          <div class="form-group">
            <input type="text" name="city-search" class="form-control" id="homepage-search" placeholder="Search cities...">
                <!--script to auto complete location-->
                    <script>
                            function initMap() {
        
                            var defaultBounds = new google.maps.LatLngBounds(
                            new google.maps.LatLng(-90, 91), new google.maps.LatLng(-180, 80));
                          var options = {
                            types: ['(cities)'],
                            bounds: defaultBounds
                          };
                          var input = document.getElementById('homepage-search');
                          
                          var autocomplete = new google.maps.places.Autocomplete(input, options);
                          }
                    </script>

                    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBYfS_V4jHXS_jVYa1k2w9VY52r0pMrL8g&callback=initMap&libraries=places"
                    async defer></script>
          </div>

          <div class="buttons">
            <button class="header-button">Find a Guide</button>
            <button class="header-button">Become a Guide</button>
          </div>
        </form>
    </div>

    <div class="mobile">
      <img src=" {% static 'images/cap.jpg' %} ">
    </div>
  
    <!-- video background -->
    <video autoplay muted loop id="background_video">
            <source src="{% static 'videos/fun.mp4' %}" type="video/mp4" id="vid">
    </video>

    <!-- shows the arrow pointing down at the bottom -->
    <div class="arrow"></div>
  </div>
</div>

<!-- How It Works section -->
<div class="how-it-works-container container-fluid" id="how-it-works">

  <h2>How It Works</h2>

  <div class="row">

    <div class="col-lg-4 col-xs-12">
        <div class="how-it-works-box"> 
          <img src=" {% static "images/meetlocals3.svg" %} "> 
          <h3>When You're a Traveler</h3>
          <p>Meet like minded locals who could show you around their city.</p>
        </div>
    </div>

    <div class="col-lg-4 col-xs-12">
      <div class="  how-it-works-box">
        <img src=" {% static "images/showpeople.svg" %} ">
        <h3>When You're a Local</h3>
        <p>Show travelers around and meet interesting international visitors.</p>
      </div>
    </div>

    <div class="col-lg-4 col-xs-12">
      <div class=" how-it-works-box">
        <img src=" {% static "images/makefriends.svg" %} ">
        <h3>Make New Friends!</h3>
        <p>Walking around is a fun bonding activity to make new friends!</p>
      </div>

    </div>
  </div>
</div>

<div class="container-fluid superstars-container" id="superstars">

  <h2>Super Stars</h2>

  <div class="row">

<!--pulls last two references-->
{% if refs %}
{% for ref in refs %}

    <div class="col-lg-6 col-xs-12">
        <div class="superstars-box">

            <div class="superstars-box-header">

              <a href=" {% url 'excurj:show_profile' ref.request.local.username %} ">{{ ref.request.local.first_name.title }}</a>  (local) met with  <a href=" {% url 'excurj:show_profile' ref.request.traveler.username  %} ">{{ref.request.traveler.first_name.title}}</a> (traveler) on {{ref.request.date}} in  <a href=" {% url 'excurj:show_city'  ref.request.local.profile.city.slug %} "> {{ref.request.local.profile.city}} </a>  
            </div>

              <div class="clearfix paired">

                <img src=" {{ ref.request.local.profile.prof_pic.url }} " id="first" class="img-circle img-responsive">
                <img src=" {{ ref.request.traveler.profile.prof_pic.url }} " id="second" class="img-circle img-responsive">

                <strong>{{ ref.request.local.first_name.title}} said:</strong>
                <span style="font-size: 20px">"</span> 
                {{ ref.local_desc }} <span style="font-size: 20px">"</span><br> <strong>{{ref.request.traveler.first_name.title}} said:</strong> <span style="font-size: 20px">"</span> {{ ref.traveler_desc }} <span style="font-size: 20px">"</span>
                
              </div>
              
        </div>
    </div>

{% endfor %}
{% endif %}
 
  </div>
</div>

  <div class="container-fluid popular-cities-container" id="popularcities">
    
      <h2>Popular Cities</h2>
      <div class="row">

{% if cities %}
{% for city in cities %}

        <div class="col-lg-2 col-xs-12">
          <div class="popular-cities-box">
          <div class="thumbnails">
            <a href="{% url 'excurj:show_city' city.slug %}">
              <div class="captions">
                <h2> {{ city.name }} </h2>
              </div>
{% if city.userprofile_set.count == 1 %}

              <div class="num">
                <p> Has one awesome person!</p>
              </div>
{% else %}
              <div class="num">
                <p> Has {{ city.userprofile_set.count}} people!</p>
              </div>

{% endif %}

              <img src=" {{city.photo_url}} " class="img-responsive img-rounded">

            </a>
          </div>
        </div>
      </div>

{% endfor %}
{% else %}
  <strong>There's no cities</strong>
{% endif %}

      </div>
  </div>

<div class="container-fluid superstars-container">

  <h2>Instagram Feed  (<a href="https://www.instagram.com/explore/tags/excurj/" target="_blank">#excurj</a>) </h2>
  
    <!-- SnapWidget -->
  <script src="https://snapwidget.com/js/snapwidget.js"></script>
  <iframe src="https://snapwidget.com/embed/384797" class="snapwidget-widget" allowTransparency="true" frameborder="0" scrolling="no" style="border:none; overflow:hidden; width:100%; "></iframe>

</div>

<div class="superstars-container ready">
  
    <div class="ready-header">
      <h2>Ready to meet new friends?</h2>
      <button class="ready-header-button">Sign up for free!</button>
    </div>
    
          
  

    <!-- <img src=" {% static 'images/2friends.jpg' %} " id="readyimg"> -->
  
</div>

{% endblock %}
