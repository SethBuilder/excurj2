{% extends 'excurj/base.html' %}
{% load staticfiles %}

{% block title_block %}
  excurj | Meet Locals Wherever You Travel | Become Friends With Locals,| Free Excursions | Bonding Activities | Culture Exchange | Current Events, Things To Do and More!
{% endblock %}

{% block desc_block %}
  <meta name="description" content="excurj is the ultimate social network for travelers and locals from all over the world. Meet locals. Go on free excurions to bond and become friends! Exchange culture. Learn about local events, history and more!">
{% endblock %}


{% block kw_block %}
  <meta name="keywords" content="meet locals from all over the world, events, excursions, make friends with locals, friends, fun, genuine travel experience, culture, cultural exchange, inter-cultural relationships, tolerance, travel, travel blogging, travel vloging, things to do in">
{% endblock %}

{% block body_block %}

<div class="jumbotron " id="index-jumbotron">
  <div id="container">
    <div class="homepage_jumbo col-md-4 col-md-offset-4 col-xs-8 col-xs-offset-2">

        <section class="header-sections">
        
        {% if request.user.is_authenticated %}

          <h1>{{request.user.first_name.title}},
          where do you want to go?</h1>
        
        {% else %}

        <h1>Where do you want to go?</h1>

        {% endif %}
        
        </section>

        <section class="header-sections">
          <p>excurj. is a community where people show visitors around their cities to make new friendships.</p>
        </section>

        <form action=" {% url 'excurj:search' %} ">
          <div class="form-group">
            <input type="text" name="city-search" class="form-control google_city_search" id="google_city_search" placeholder="Search cities..." >
                
          </div>

          <div class="buttons">
            <button class="header-button">Find a Guide</button>
            <button class="header-button">Become a Guide</button>
          </div>
        </form>
    </div>

    <div class="mobile">
      <img src=" {% static 'images/cap.jpg' %} " class="">
    </div>
  
    <!-- video background -->
    <video autoplay muted loop id="background_video">
            <source src="{% static 'videos/fun.mp4' %}" type="video/mp4" id="vid">
            <img src="{% static 'images/capture.jpg' %}">
    </video>

    <!-- shows the arrow pointing down at the bottom -->
    <div class="arrow"></div>
  </div>
</div>

<!-- How It Works section -->
<div class="how-it-works-container container-fluid" id="how-it-works">

  <h2>How It Works</h2>

  <div class="row">

    <div class="col-lg-4 col-xs-12">
        <div class="how-it-works-box"> 
          <img src=" {% static "images/meetlocals3.svg" %} "> 
          <h3>When You're a Traveler</h3>
          <p>Meet like minded locals who could show you around their city.</p>
        </div>
    </div>

    <div class="col-lg-4 col-xs-12">
      <div class="  how-it-works-box">
        <img src=" {% static 'images/showpeople.svg' %} ">
        <h3>When You're a Local</h3>
        <p>Show travelers around and meet interesting international visitors.</p>
      </div>
    </div>

    <div class="col-lg-4 col-xs-12">
      <div class=" how-it-works-box">
        <img src=" {% static 'images/makefriends.svg' %} ">
        <h3>Make New Friends!</h3>
        <p>Walking around is a fun bonding activity to make new friends!</p>
      </div>

    </div>
  </div>
</div>

<div class="container-fluid superstars-container" id="superstars">

  <h2>Super Stars</h2>
  <p style="color: #929dad;
    font-size: 12px;
    font-weight: 700;
    letter-spacing: .2px;
    text-transform: uppercase;
    ">Last Two Reviews</p>

  <div class="container-fluid">

<!--pulls last two references-->
{% if refs %}
{% for ref in refs %}

    <div class="col-lg-6 col-xs-12">
        <div class="superstars-box">

            <div class="superstars-box-header">

              <a title="Local person reference" href=" {% url 'excurj:show_profile' ref.request.local.username %} ">{{ ref.request.local.first_name.title }}</a>  (local) met with  <a title="traveler's reference" href=" {% url 'excurj:show_profile' ref.request.traveler.username  %} ">{{ref.request.traveler.first_name.title}}</a> (traveler) on {{ref.request.date}} in  <a href=" {% url 'excurj:show_city'  ref.request.local.profile.city.slug %} "> {{ref.request.local.profile.city}} </a>  
            </div>

              <div class="clearfix paired">

                <img alt="{{ ref.request.local.first_name.title }}  {{ ref.request.local.last_name.title }}" src=" {{ ref.request.local.profile.prof_pic.url }} " id="first" class="img-circle img-responsive" height="100" width="100">
                <img alt="{{ref.request.traveler.first_name.title}}  {{ref.request.traveler.last_name.title}}" src=" {{ ref.request.traveler.profile.prof_pic.url }} " id="second" class="img-circle img-responsive" height="100" width="100">

                <strong>{{ ref.request.local.first_name.title}} said:</strong>
                <quote> 
                  {{ ref.local_desc }} 
                </quote><br> <strong>{{ref.request.traveler.first_name.title}} said:</strong> 
                <quote>
                  {{ ref.traveler_desc }} 
                </quote>
                
              </div>
              
        </div>
    </div>

{% endfor %}
{% endif %}
 
  </div>
</div>

  <div class="container popular-cities-container" id="popularcities">
    
      <h2>Popular Cities</h2>
      <p style="color: #929dad;
    font-size: 12px;
    font-weight: 700;
    letter-spacing: .2px;
    text-transform: uppercase;
    ">
      6 Most populated cities
      </p>
      <div class="row">

{% if cities %}
{% for city in cities %}

        <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
          <div class="popular-cities-box">
          <div class="thumbnails">
            <a title="{{ city.display_name }}" href="{% url 'excurj:show_city' city.slug %}">
              <div class="captions">
                <h2> {{ city.display_name }} </h2>
              </div>
{% if city.city.count == 1 %}

              <div class="num">
                <p> Has one awesome person!</p>
              </div>
{% else %}
              <div class="num">
                <p> Has {{ city.city.count}} people!</p>
              </div>

{% endif %}

              <img alt="{{ city.display_name }}" src=" {{city.photo_url}} " class="img-responsive img-rounded">

            </a>
          </div>
        </div>
      </div>

{% endfor %}
{% else %}
  <strong>There's no cities</strong>
{% endif %}

      </div>
  </div>

<div class="container-fluid superstars-container" id="insta">

  <h2>Instagram Feed  (<a href="https://www.instagram.com/explore/tags/excurj/" target="_blank" title="excurj instagram feed (#excurj)">#excurj</a>) </h2>
  
    <!-- SnapWidget -->
  <script src="https://snapwidget.com/js/snapwidget.js"></script>
  <iframe src="https://snapwidget.com/embed/384797" class="snapwidget-widget" allowTransparency="true" frameborder="0" scrolling="no" style="border:none; overflow:hidden; width:100%; "></iframe>

</div>
<h2 id="world_map"> All Populated Cities</h2>
<p style="color: #929dad;
    font-size: 12px;
    font-weight: 700;
    letter-spacing: .2px;
    text-transform: uppercase;
    text-align: center;
    ">MARK YOUR CITY BY SIGNING UP!</p>
<div id="map_canvas" class="superstars-container" style="height: 500px;border: 5px solid #bfcad2;">
  
</div>

<script type="text/javascript">

  //CENTER CONTROL 


function CenterControl(controlDiv, map) {
  var center_here = {lat: 41.38506389999999, lng: 2.1734035,};

        // Set CSS for the control border.
        var controlUI = document.createElement('div');
        controlUI.style.backgroundColor = '#fff';
        controlUI.style.border = '2px solid #fff';
        controlUI.style.borderRadius = '3px';
        controlUI.style.boxShadow = '0 2px 6px rgba(0,0,0,.3)';
        controlUI.style.cursor = 'pointer';
        controlUI.style.marginBottom = '22px';
        controlUI.style.textAlign = 'center';
        controlUI.title = 'Click to recenter the map';
        controlDiv.appendChild(controlUI);

        // Set CSS for the control interior.
        var controlText = document.createElement('div');
        controlText.style.color = 'rgb(25,25,25)';
        controlText.style.fontFamily = 'Roboto,Arial,sans-serif';
        controlText.style.fontSize = '16px';
        controlText.style.lineHeight = '38px';
        controlText.style.paddingLeft = '5px';
        controlText.style.paddingRight = '5px';
        controlText.innerHTML = 'Center Map';
        controlUI.appendChild(controlText);

        // Setup the click event listeners: simply set the map to Chicago.
        controlUI.addEventListener('click', function() {
          map.setCenter(center_here);
        });

      }











  (function(window, google){

    //map option
    var options = {
      center: {
        lat:41.38506389999999,
        lng:2.1734035
      },
      zoom: 2,
      scrollwheel:  false
    },
    //map
    element = document.getElementById('map_canvas'),
    map = new google.maps.Map(element, options);

    var cities = {{all_cities}}

    // Create a popup for when users click on a map marker
    var infowindow = new google.maps.InfoWindow();
    var marker, i;
    // Loop through each location in the list and place a marker there
    for (i = 0; i < cities.length; i++) {
      console.log("LAAAAt is:  " + cities[i].lat)
      console.log("LNG is:  " + cities[i].lng)

      
        marker = new google.maps.Marker({
            position: new google.maps.LatLng(cities[i].lat, cities[i].lng),
            map: map,
            
        });

        google.maps.event.addListener(marker, 'click', (function (marker, i) {
          return function () {
            if (cities[i].count == 1) {
              infowindow.setContent("<a href ='" + "/city/" + cities[i].slug + "'><h3>" + cities[i].city_name + "</h3>" + "</a>" + "<br>" + 
 
                "<img class='img-circle' width=100 height=100 src='" + cities[i].king_pic + "'>" + 
                "<p class='lead'>Has one awesome person!</p>");
              }

              else{
              infowindow.setContent("<a href ='" + "/city/" + cities[i].slug + "'><h3>" + cities[i].city_name + "</h3></a>" + "<br>" + "<p class='lead'>Has " + cities[i].count + " people!</p>");
            }

            infowindow.open(map, marker);
          }
          })(marker, i));
           
            
            }

            

     

            // Create the DIV to hold the control and call the CenterControl()
        // constructor passing in this DIV.
        var centerControlDiv = document.createElement('div');
        var centerControl = new CenterControl(centerControlDiv, map);

        centerControlDiv.index = 1;
        map.controls[google.maps.ControlPosition.TOP_CENTER].push(centerControlDiv);

  }(window, google));

  

  
</script>



<div class="superstars-container ready">
  
    <div class="ready-header">
      <h2>Ready to meet new friends?</h2>
      <button class="ready-header-button">Sign up for free!</button>
    </div>
    
          
  

    <!-- <img src=" {% static 'images/2friends.jpg' %} " id="readyimg"> -->
  
</div>

<!-- Start Section Featured On -->
<!-- <section class="featured-on">
  <div class="container">
    <div class="row">
      <ul class="list-unstyled">
        <li class="col-md-2 col-xs-4"><p class="lead first">FEATURED ON:</p></li>
        <li class="col-md-2 col-xs-4"><p class="lead">FORBES</p></li>
        <li class="col-md-2 col-xs-4"><p class="lead">WIRED</p></li>
        <li class="col-md-2 col-xs-4"><p class="lead">WSJ</p></li>
        <li class="col-md-2 col-xs-4"><p class="lead">YAHOO!</p></li>
        <li class="col-md-2 col-xs-4"><p class="lead">BBC</p></li>
      </ul>
    </div>
  </div>
</section> -->
<!-- End Section Featured On -->

{% endblock %}
